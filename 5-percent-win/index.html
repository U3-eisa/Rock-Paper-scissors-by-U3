<!DOCTYPE html>
<html>
  <head>
    <title>tut3</title>
    <link rel="stylesheet" href="rockPaper5.css" />
<link rel="icon" href="../200w.gif" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">



  </head>
  <body>
    <div class="cont">
      <div class="title">
        <h1>Rock Paper Scissors Hard Mode</h1>
      </div>

      <div class="rock">
        <button
          class="emoji"
          onclick="
      playGame('rock')
    "
        >
          âœŠ
        </button>
        <button
          class="emoji"
          onclick="
      playGame('paper')

    "
        >
          ğŸ–
        </button>
        <button
          class="emoji"
          onclick="
    
        playGame('scissors')
    "
        >
          âœŒ
        </button>
      </div>
            <div class="text">     
                <div class="cooldown-bar">
                <div class="cooldown-fill" id="cooldownFill"></div>
            </div>  
        <p class="js-tip"></p>

   
        <h3 class="js-result"></h3>
        <h4 class="js-moves"></h4>
        <h2 class="js-score"></h2>
      </div>
      <div class="rest-div">
        <button
          class="rest-button"
          onclick="
    score.win=0;
    score.losses=0;
    score.ties=0;
    localStorage.removeItem('score')
    console.log('The score has been rest')
    updateScoreElement();
    "
        >
          Rest
        </button>
      </div>
    </div>

    <div class="win-overlay" id="winOverlay">
  <div class="win-card">
    <div class="win-title">ATTEMPT SUCCEED âœ…</div>
    <div class="win-sub">Click the button to continue</div>

    <button class="win-btn" id="winBtn">
      Go to the link
    </button>
  </div>
</div>


    <script>
      let badLuckCounter = 0; // Ø®Ø³Ø§Ø±Ø© + ØªØ¹Ø§Ø¯Ù„

      let suppressHurryUntil = 0; // ÙŠÙ…Ù†Ø¹ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø§Ø³ØªØ¹Ø¬Ø§Ù„ Ù„ÙØªØ±Ø© Ù‚ØµÙŠØ±Ø© Ø¨Ø¹Ø¯ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø­Ø¸


      let lastPlayTime = 0;
     const COOLDOWN_MS = 1000;
let gameLocked = false; 

const cooldownFill = document.getElementById("cooldownFill");
let cooldownTimer = null;

function startCooldownBar() {
  document.querySelector(".cooldown-bar")?.classList.remove("done");

  if (!cooldownFill) return;

  clearInterval(cooldownTimer);
  cooldownFill.style.width = "0%";

  const start = Date.now();
  cooldownTimer = setInterval(() => {
    const elapsed = Date.now() - start;
    const pct = Math.min(100, (elapsed / COOLDOWN_MS) * 100);
    cooldownFill.style.width = pct + "%";

    if (pct >= 100) {
       if (!cooldownFill) return;

      document.querySelector(".cooldown-bar")?.classList.add("done");

      clearInterval(cooldownTimer);
      cooldownTimer = null;
    }
  }, 30);
}

      
      let score = JSON.parse(localStorage.getItem("score")) || {
        win: 0,
        losses: 0,
        ties: 0,
      };
      console.log("5-percent-win version running âœ…");

      document.querySelectorAll(".emoji").forEach(btn => {
  btn.addEventListener("dblclick", (e) => e.preventDefault());
});

      
    let cooldownUntil = 0;


function showTip(msg) {
  const tip = document.querySelector(".js-tip");
  if (!tip) return;

  tip.textContent = msg;
  tip.classList.add("show");

  clearTimeout(window.__tipTimer);
  window.__tipTimer = setTimeout(() => {
    tip.classList.remove("show");
  }, 1200);
}

function setEmojiButtonsEnabled(enabled) {
  document.querySelectorAll(".emoji").forEach(btn => {
    btn.disabled = !enabled;
  });
}
      updateScoreElement();


      function setCooldownVisual(isOn) {
  document.querySelectorAll(".emoji").forEach(btn => {
    btn.classList.toggle("cooldown", isOn);
  });
}

      
  function playGame(playerMove) {
  // Ù„Ùˆ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§ØªÙ‚ÙÙ„Øª Ø¨Ø¹Ø¯ Ø§Ù„ÙÙˆØ²ØŒ Ù…Ø§ ØªØ¹Ù…Ù„ Ø£ÙŠ Ø­Ø§Ø¬Ø©
  if (gameLocked) return;

  const now = Date.now();
  const elapsed = now - lastPlayTime;

  if (elapsed < COOLDOWN_MS) {
  // Ù„Ùˆ ÙÙŠ ÙƒØªÙ… Ø¨Ø³Ø¨Ø¨ Ø±Ø³Ø§Ù„Ø© Ø­Ø¸ØŒ Ù…Ø§ Ù†Ø¹Ø±Ø¶ "Ù…Ø³ØªØ¹Ø¬Ù„"
  if (Date.now() < suppressHurryUntil) return;

  showTip("Ù…Ø³ØªØ¹Ø¬Ù„ Ù„Ø§Ø­Ù‚ Ø´Ù†ÙˆØŸ ÙˆØ­Ø¯Ø© ÙˆØ­Ø¯Ø©");
  setCooldownVisual(true);
  return;
}


  // Ù„Ø¹Ø¨Ø© ØµØ­ÙŠØ­Ø©: Ø§Ø¨Ø¯Ø£ ÙƒÙˆÙ„Ø¯Ø§ÙˆÙ† Ø¬Ø¯ÙŠØ¯
  lastPlayTime = now;
  setCooldownVisual(true);
  setTimeout(() => setCooldownVisual(false), COOLDOWN_MS);
  startCooldownBar();

  const Cm = pickcomputermove(playerMove);

  let result = "";

  if (playerMove === "scissors") {
    if (Cm === "rock") result = "You lose";
    else if (Cm === "paper") result = "You win";
    else result = "tie";
  } else if (playerMove === "paper") {
    if (Cm === "rock") result = "You win";
    else if (Cm === "paper") result = "tie";
    else result = "You lose";
  } else if (playerMove === "rock") {
    if (Cm === "rock") result = "tie";
    else if (Cm === "paper") result = "You lose";
    else result = "You win";
  }

  // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³ÙƒÙˆØ±
 // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³ÙƒÙˆØ± + Ø¹Ø¯Ø§Ø¯ Ø³ÙˆØ¡ Ø§Ù„Ø­Ø¸
if (result === "You win") {
  score.win += 1;

  // âœ… ÙÙˆØ²: ØµÙÙ‘Ø± Ø¹Ø¯Ø§Ø¯ Ø³ÙˆØ¡ Ø§Ù„Ø­Ø¸
  badLuckCounter = 0;

  // âœ… Ø£ÙˆÙ„ ÙÙˆØ² = Ù‚ÙÙ„ Ù†Ù‡Ø§Ø¦ÙŠ + Ø´Ø§Ø´Ø© Ø®Ø¶Ø±Ø§Ø¡
  gameLocked = true;
  showWinOverlay();

} else if (result === "You lose") {
  score.losses += 1;

  // âŒ Ø®Ø³Ø§Ø±Ø©: Ø²ÙˆÙ‘Ø¯ Ø¹Ø¯Ø§Ø¯ Ø³ÙˆØ¡ Ø§Ù„Ø­Ø¸
  badLuckCounter += 1;

} else { // tie
  score.ties += 1;

  // âŒ ØªØ¹Ø§Ø¯Ù„: Ø²ÙˆÙ‘Ø¯ Ø¹Ø¯Ø§Ø¯ Ø³ÙˆØ¡ Ø§Ù„Ø­Ø¸
  badLuckCounter += 1;
}

// ğŸ”” ÙƒÙ„ 10 Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø¨Ø¯ÙˆÙ† ÙÙˆØ²
if (!gameLocked && badLuckCounter > 0 && badLuckCounter % 10 === 0) {
  let msg = "";

  if (badLuckCounter === 10) msg = "Ø­Ø¸Ùƒ Ø³ÙŠØ¡";
  else if (badLuckCounter === 20) msg = "Ø­Ø¸Ùƒ ØªØ¹Ø¨Ø§Ù†";
  else if (badLuckCounter === 30) msg = "Ø­Ø¸Ùƒ Ø²ÙØª";
  else if (badLuckCounter === 40) msg = "Ù…Ø§ Ø¹Ù†Ø¯Ùƒ Ø­Ø¸ Ø£ØµÙ„Ø§";
  else if (badLuckCounter === 50) msg = "Ø§Ø·Ù„Ø¹ Ø¨Ø±Ù‘Ù‡";
  else msg = "Ù…Ø§ Ù‚Ù„Ù†Ø§ Ù„ÙŠÙƒ Ø¨Ø±Ø§";

  showTip(msg);
  suppressHurryUntil = Date.now() + 1300;
}


  updateScoreElement();
  localStorage.setItem("score", JSON.stringify(score));

  document.querySelector(".js-result").innerHTML = `${result}.`;
  document.querySelector(".js-moves").innerHTML =
    `You ${playerMove} - ${Cm} Computer`;
}


      function updateScoreElement() {
        document.querySelector(
          ".js-score"
        ).innerHTML = `Wins:${score.win},Losses:${score.losses},Ties:${score.ties}`;
      }

      function pickcomputermove(playerMove) {
  const randomNumber = Math.random();

  // 5% ÙÙ‚Ø· ÙÙˆØ² Ù„Ù„Ø§Ø¹Ø¨
  if (randomNumber < 0.7) {
    // Ø­Ø±ÙƒØ© ØªØ¬Ø¹Ù„ Ø§Ù„Ù„Ø§Ø¹Ø¨ ÙŠÙÙˆØ²
    if (playerMove === "rock") return "scissors";
    if (playerMove === "paper") return "rock";
    if (playerMove === "scissors") return "paper";
  } else {
    // 95% Ø®Ø³Ø§Ø±Ø© Ø£Ùˆ ØªØ¹Ø§Ø¯Ù„
    const loseOrTie = Math.random();

    if (playerMove === "rock") {
      return loseOrTie < 0.5 ? "paper" : "rock";
    }
    if (playerMove === "paper") {
      return loseOrTie < 0.5 ? "scissors" : "paper";
    }
    if (playerMove === "scissors") {
      return loseOrTie < 0.5 ? "rock" : "scissors";
    }
  }
}
      const SUCCESS_URL = "https://wa.me/message/DNFBRQYXDU6QF1";

      
function showWinOverlay() {
  const overlay = document.getElementById("winOverlay");
  if (!overlay) return;
  overlay.classList.add("show");
}

function hideWinOverlay() {
  const overlay = document.getElementById("winOverlay");
  if (!overlay) return;
  overlay.classList.remove("show");
}

// Ø²Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù„Ù„Ø±Ø§Ø¨Ø·
document.getElementById("winBtn")?.addEventListener("click", () => {
  window.location.href = SUCCESS_URL;
});


    </script>
  </body>
</html>
